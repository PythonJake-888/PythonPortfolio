{% extends "base.html" %}
{% block content %}

<h1>Admin â€“ Projects</h1>

<form method="POST"
      action="{{ url_for('add_project') }}"
      enctype="multipart/form-data"
      class="admin-form">

  <input name="title" placeholder="Title" required>
  <input name="tech" placeholder="Tech">
  <input name="github" placeholder="GitHub URL">

  <textarea name="description" placeholder="Description"></textarea>

  <input type="file" name="image">

  <div class="form-actions">
    <button type="submit" class="btn btn-primary">
      Add Project
    </button>
  </div>

</form>



<hr>

{% for project in projects %}
  <div class="admin-project-card">

    <h3>{{ project.title }}</h3>

    {% if project.image %}
      <img
        src="{{ url_for('static', filename='uploads/' ~ project.image) }}"
        alt="{{ project.title }}"
        class="admin-project-image"
      >
    {% else %}
      <p class="no-image">No image uploaded</p>
    {% endif %}

    <p>{{ project.description }}</p>
    <small>{{ project.tech }}</small>

    <div class="admin-actions">
      <!-- EDIT -->
      <a href="{{ url_for('edit_project', id=project.id) }}"
         class="btn btn-edit">
        Edit
      </a>

      <!-- DELETE -->
      <form method="POST"
            action="{{ url_for('delete_project', id=project.id) }}"
            onsubmit="return confirm('Are you sure you want to delete this project?');"
            style="display:inline;">
        <button type="submit" class="btn btn-delete">
          Delete
        </button>
      </form>
    </div>

  </div>
{% endfor %}


{% endblock %}
